# JMeter vs k6: 가상 유저 수용량 비교

성능 테스트 도구 선택 시 **'가상 유저(Virtual User, VU) 수용량'**은 부하 발생기의 하드웨어 비용과 직결되는 매우 중요한 요소입니다. JMeter와 k6가 동일한 사양(예: t3.medium)에서 지원할 수 있는 가상 유저 수의 차이를 구체적으로 비교해 드립니다.

## 1. 하드웨어 효율성 및 VU 지원 수 비교

| 항목 | JMeter (Thread 방식) | k6 (Go Routine 방식) |
|------|----------------------|-----------------------|
| 작동 원리 | 1 VU = 1 OS Thread | 1 VU = 1 Go Routine (이벤트 기반) |
| 메모리 소모 | 높음 (Thread당 1MB~ 이상 할당) | 매우 낮음 (Routine당 수 KB 수준) |
| t3.medium (4GB RAM) 기준 | 약 300~500 VU | 약 2,000~5,000 VU+ |
| 한계 발생 시점 | 메모리 부족(OOM) 및 컨텍스트 스위칭 부하 | 네트워크 대역폭 및 CPU 한계 |

## 2. 왜 이렇게 큰 차이가 나나요?

### ① JMeter: 중량급 스레드 모델

JMeter는 Java의 Thread 모델을 사용합니다. OS 레벨에서 스레드가 생성될 때마다 메모리를 점유하며, 스레드가 너무 많아지면 CPU가 "어떤 스레드를 처리할지" 결정하는 컨텍스트 스위칭(Context Switching) 비용이 커져 실제 부하를 주는 효율이 떨어집니다.

### ② k6: 경량급 고루틴 모델

k6는 Go 언어의 Go Routine을 사용합니다. 이는 OS 스레드보다 훨씬 가벼운 가상 스레드입니다. 수천 개의 고루틴을 단 몇 개의 OS 스레드 위에서 실행하므로 메모리 소모가 극도로 적고, CPU 자원을 부하 생성에만 온전히 집중할 수 있습니다.

## 3. 실무적 관점에서의 선택 가이드

단순히 "많이 지원하니까 k6가 최고다"라고 할 수는 없습니다. 시나리오의 성격에 따라 선택이 달라집니다.

### JMeter가 유리한 경우 (VU는 적지만 복잡한 경우)

- 가상 유저 수는 1,000명 이하로 충분한데, 각 유저가 수행하는 시나리오가 매우 복잡할 때.
- 응답 데이터의 크기가 크고, 이를 파싱(Parsing)하여 다음 요청에 써야 하는 로직이 많을 때.
- UI 기반으로 빠르게 시나리오를 구성하고 결과를 시각적으로 확인해야 할 때.

### k6가 유리한 경우 (VU가 압도적으로 많아야 하는 경우)

- 수만 명의 동시 접속자를 단 몇 대의 부하 발생기로 구현하고 싶을 때.
- 단순한 API 호출(로그인, 조회 등) 위주의 고부하 테스트를 수행할 때.
- 부하 발생기의 사양(t3.medium 등)이 낮아 자원을 극한으로 아껴 써야 할 때.

## 4. 요약: 가상 유저당 비용

만약 10,000 VU를 생성해야 한다면:

- **JMeter**: 약 20~30대의 t3.medium 인스턴스가 필요 (분산 테스팅 설정 필수).
- **k6**: 약 2~3대의 t3.medium 인스턴스만으로도 가능.

결과적으로 k6를 사용하면 인프라 비용을 약 5~10배 정도 절감할 수 있습니다.

## 💡 전문가의 제안

"목표로 하시는 동시 접속자 수가 500명 이상인가요? 만약 그렇다면 JMeter의 분산 테스팅(Master-Slave) 설정을 배우셔야 하고, 만약 그 과정이 번거롭다면 k6로 전환하여 단일 장비에서 테스트하는 것을 고려해 보시는 것이 좋습니다."