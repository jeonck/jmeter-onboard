# ν‘μ¤€ λ¶€ν• ν…μ¤νΈ ν”„λ΅μ„Έμ¤

JMeterλ¥Ό ν™μ©ν• λ¶€ν•ν…μ¤νΈλ” λ‹¨μν λ„κµ¬λ¥Ό μ‹¤ν–‰ν•λ” κ²ƒμ΄ μ•„λ‹λΌ, **'ν„μƒμ μ›μΈμ„ μ°Ύλ” κ³Όν•™μ  κ³Όμ •'**μ— κ°€κΉμµλ‹λ‹¤. t3.medium μ„λ²„μ™€ Scouterλ¥Ό ν™μ©ν•λ” μ‹¤μµ ν™κ²½μ— λ§μ¶°, μ‹¤λ¬΄μ—μ„ μ§„ν–‰λλ” ν‘μ¤€ λ¶€ν•ν…μ¤νΈ 5λ‹¨κ³„ μ μ°¨λ¥Ό μ •λ¦¬ν•΄ λ“λ¦½λ‹λ‹¤.

## 1. ν…μ¤νΈ κ³„ν λ° λ¶„μ„ (Planning)

λ¬΄ν„±λ€κ³  1,000λ…μ„ μ ‘μ†μ‹ν‚¤λ” κ²ƒμ΄ μ•„λ‹λΌ, λ©ν‘μΉλ¥Ό μ„¤μ •ν•λ” λ‹¨κ³„μ…λ‹λ‹¤.

- **λ©ν‘ μ„¤μ • (KPI)**: μ΄λ‹Ή μ²λ¦¬λ‰(TPS), λ©ν‘ μ‘λ‹µ μ‹κ°„(ν‰κ·  1μ΄ μ΄λ‚΄), λ™μ‹ μ ‘μ†μ μ λ“±μ„ κ²°μ •ν•©λ‹λ‹¤.
- **μ‹λ‚λ¦¬μ¤ λ„μ¶**: μ•μ„ λ§λ“μ‹  'μ¥λ°”κµ¬λ‹ λ‹΄κΈ°'μ²λΌ μ‚¬μ©μμ μ£Όμ” λ™μ„ μ„ ν™•μ •ν•©λ‹λ‹¤.
- **ν™κ²½ νμ•…**: t3.mediumμ μ‚¬μ–‘(2vCPU, 4GB RAM)μ„ ν™•μΈν•κ³ , λ³‘λ©μ΄ μμƒλλ” μ§€μ (DB, λ„¤νΈμ›ν¬ λ“±)μ„ λ―Έλ¦¬ μ§μ–΄λ΄…λ‹λ‹¤.

## 2. ν…μ¤νΈ μ¤ν¬λ¦½νΈ μ‘μ„± (Scripting)

JMeterμ—μ„ 'λΈ”λ΅'μ„ μ“μ•„ μ‹λ‚λ¦¬μ¤λ¥Ό μλ™ν™”ν•λ” λ‹¨κ³„μ…λ‹λ‹¤.

- **μ”μ† λ°°μΉ**: Thread Group, Sampler, Timer, Assertion λ“±μ„ κµ¬μ„±ν•©λ‹λ‹¤.
- **λ°μ΄ν„° νλΌλ―Έν„°ν™”**: CSV Data Set Configλ¥Ό μ΄μ©ν•΄ μ—¬λ¬ μ•„μ΄λ””λ΅ λ΅κ·ΈμΈν•λ„λ΅ μ„¤μ •ν•©λ‹λ‹¤.
- **κ²€μ¦(Assertion)**: μ‘λ‹µ κ²°κ³Όμ— "μ„±κ³µ" λ©”μ‹μ§€κ°€ ν¬ν•¨λμ–΄ μλ”μ§€ κ²€μ¦ λ΅μ§μ„ λ„£μµλ‹λ‹¤.

## 3. λ¶€ν• μ‹¤ν–‰ λ° λ¨λ‹ν„°λ§ (Execution)

μ¤€λΉ„λ μ¤ν¬λ¦½νΈλ΅ μ‹¤μ  λ¶€ν•λ¥Ό μ£Όκ³  Scouterλ΅ λ‚΄λ¶€ μƒν™©μ„ κ°μ‹ν•©λ‹λ‹¤.

- **Warm-up**: μ²μλ¶€ν„° ν’€ νμ›λ΅ μμ§€ μ•κ³ , μ†μμ μΈμ›μΌλ΅ μ‹μ¤ν…μ„ 'μμ—΄'ν•©λ‹λ‹¤.
- **Main Test**: μ„¤μ •ν• Ramp-up κΈ°κ°„μ— λ§μ¶° λ¶€ν•λ¥Ό λ‹¨κ³„μ μΌλ΅ μ¬λ¦½λ‹λ‹¤.
- **Scouter κ΄€μ°°**: 
  - XLog: κ°λ³„ μ”μ²­μ μ²λ¦¬ μ‹κ°„ λ¶„ν¬ ν™•μΈ.
  - Active Service: ν„μ¬ μ„λ²„μ—μ„ μ •μ²΄λ μ”μ²­μ΄ λ‡ κ°μΈμ§€ ν™•μΈ.
  - Resource: CPU, Memory, DB Connection μ‚¬μ©λ‰ λ¨λ‹ν„°λ§.

## 4. κ²°κ³Ό λ¶„μ„ λ° λ³‘λ© μ§€μ  νμ•… (Analysis)

ν…μ¤νΈ κ²°κ³Ό λ°μ΄ν„°λ¥Ό ν•΄μ„ν•μ—¬ 'μ™ λλ¦°μ§€' λ°ν€λ‚΄λ” κ°€μ¥ μ¤‘μ”ν• λ‹¨κ³„μ…λ‹λ‹¤.

- **Throughput λ¶„μ„**: μ‚¬μ©μ μλ” λμ–΄λ‚λ”λ° TPSκ°€ μ •μ²΄λλ‹¤λ©΄, κ·Έ μ§€μ μ΄ **Saturation Point(μ„κ³„μ )**μ…λ‹λ‹¤.
- **λ³‘λ© μ§€μ (Bottleneck) μ¶”μ **: 
  - Scouter XLogλ¥Ό ν†µν•΄ λλ¦° SQL μΏΌλ¦¬ λ°κ²¬.
  - Java λ©”μ„λ“ μ¤‘ μ‘λ‹µμ΄ λ¦λ” λ΅μ§(Lock, λ¬΄κ±°μ΄ μ—°μ‚° λ“±) νΉμ •.
- **μ—λ¬ λ¶„μ„**: 500 μ—λ¬λ‚ Connection Timeout λ°μƒ μ›μΈ λ¶„μ„.

## 5. κ²°κ³Ό λ³΄κ³  λ° νλ‹ (Reporting & Tuning)

λ°κ²¬ν• λ¬Έμ λ¥Ό ν•΄κ²°ν•κ³  λ‹¤μ‹ ν…μ¤νΈν•μ—¬ κ°μ„  μ‚¬ν•­μ„ ν™•μΈν•©λ‹λ‹¤.

- **μ„±λ¥ λ¦¬ν¬νΈ**: ν‰κ·  μ‘λ‹µμ‹κ°„, TPS, μ„±κ³µλ¥  λ“±μ„ λ¬Έμ„ν™”ν•©λ‹λ‹¤.
- **μ‹μ¤ν… νλ‹**: DB μΈλ±μ¤ μ¶”κ°€, Tomcat μ¤λ λ“ μ„¤μ • λ³€κ²½, μ†μ¤ μ½”λ“ μμ • λ“±.
- **μ¬ν…μ¤νΈ(Retest)**: νλ‹ ν›„ λ™μΌν• μ‹λ‚λ¦¬μ¤λ΅ λ‹¤μ‹ λ¶€ν•λ¥Ό μ£Όμ–΄ μ„±λ¥μ΄ κ°μ„ λμ—λ”μ§€ κ²€μ¦ν•©λ‹λ‹¤.

## π’΅ μ‹¤μµ ν: CLI λ¨λ“ κ¶μ¥

μ‹¤λ¬΄μ—μ„ μ§„μ§ ν° λ¶€ν•λ¥Ό μ¤„ λ•λ” JMeter GUIλ¥Ό λ„κ³  CLI(Non-GUI) λ¨λ“λ΅ μ‹¤ν–‰ν•©λ‹λ‹¤. GUI μμ²΄κ°€ λ‚΄ μ»΄ν“¨ν„° μμ›μ„ λ§μ΄ λ¨ΉκΈ° λ•λ¬Έμ…λ‹λ‹¤.

```bash
# CLI μ‹¤ν–‰ μμ‹
jmeter -n -t [ν…μ¤νΈκ³„ν.jmx] -l [κ²°κ³Όλ³΄κ³ μ„.jtl]
```