# JMeter Function Helper - 파일명 자동 생성

JMeter에서 부하 테스트를 수행할 때, 매번 결과 파일(.jtl)의 이름을 수동으로 바꾸는 것은 매우 번거로운 일입니다. Function Helper를 활용하면 테스트가 시작되는 날짜와 시간, 또는 특정 변수를 파일명에 자동으로 포함시켜 결과 파일을 체계적으로 관리할 수 있습니다.

## 1. 파일명 자동 생성에 쓰이는 핵심 함수

가장 많이 사용되는 조합은 현재 시간을 접미사로 붙이는 방식입니다.

**${__time(yyyyMMdd_HHmmss,)}**

- **기능**: 현재 시간을 지정한 포맷으로 출력합니다.
- **결과 예시**: 20260203_160530
- **활용**: test_result_${__time(yyyyMMdd_HHmmss,)}.jtl라고 설정하면 실행할 때마다 고유한 파일이 생성되어 기존 파일이 덮어씌워지는 것을 방지합니다.

## 2. 구체적인 설정 단계

### ① GUI 모드에서 설정 (테스트 스크립트 작성 시)

주로 Simple Data Writer나 View Results Tree 같은 리스너의 Filename 필드에 적용합니다.

1. JMeter에서 리스너(예: Simple Data Writer)를 추가합니다.
2. Filename 입력 칸에 다음과 같이 입력합니다.
   ```
   C:\jmeter\results\result_${__time(yyyyMMdd_HHmmss,)}.jtl
   ```
3. 테스트를 실행하면 해당 경로에 result_20260203_161022.jtl와 같은 파일이 생성됩니다.

### ② CLI 모드(Non-GUI) 실행 시 활용 (권장)

실제 부하 테스트는 CLI 모드에서 진행하는 것이 정석입니다. 이때 쉘 스크립트나 커맨드 라인에서 직접 함수를 전달할 수 있습니다.

**명령어 예시 (Windows)**:
```bash
jmeter -n -t test_plan.jmx -l result_%date%_%time:~0,2%%time:~3,2%%time:~6,2%.jtl
```
(참고: CLI 환경에서는 OS 자체의 환경 변수를 쓰는 것이 더 일반적이지만, JMX 내부 설정에 함수를 넣어두면 명령어를 단순화할 수 있습니다.)

## 3. 고급 활용: 테스트 조건 포함하기

단순 시간뿐만 아니라, **사용자 수(Thread)**나 테스트 목적을 파일명에 동적으로 넣을 수도 있습니다.

- **방법**: 사용자 정의 변수(User Defined Variables)와 조합
- **설정**: result_VUser${__P(user, 10)}_${__time(MMddHHmm,)}.jtl
- **의미**: 
  - ${__P(user, 10)}: 외부에서 넘겨받은 user라는 속성값(기본값 10)을 가져옵니다.
- **결과**: result_VUser100_02031610.jtl (100명의 유저로 2월 3일 16시 10분에 실행함)

## 4. t3.medium 환경 관리 팁

- **디스크 공간 주의**: 매번 새로운 .jtl 파일을 생성하면 t3.medium 인스턴스의 디스크 용량이 금방 찰 수 있습니다. 오래된 파일은 주기적으로 삭제하거나 S3 등으로 백업하는 스크립트를 병행하세요.
- **분석 용이성**: 파일명에 시간을 넣으면 Scouter의 대시보드 시간대와 대조하기 매우 편리합니다. "어제 오후 4시에 했던 테스트 결과가 뭐였지?"라고 찾을 때 파일명만 보고도 즉시 확인이 가능합니다.

## ⚠️ 주의사항: : 문자 사용 금지

Windows 운영체제에서는 파일명에 콜론(:)을 사용할 수 없습니다. 따라서 ${__time(HH:mm:ss)} 처럼 콜론이 포함된 포맷을 파일명에 넣으면 파일 생성에 실패하므로 반드시 HHmmss 또는 HH_mm_ss 형식을 사용하세요.