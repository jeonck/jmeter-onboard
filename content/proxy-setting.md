# 프록시 서버 설정의 필요성

JMeter에서 레코딩 기능을 사용할 때 프록시(Proxy) 서버를 설정해야 하는 이유는 아주 명확합니다. JMeter가 브라우저와 대상 서버 사이에서 '도청자'이자 '기록관' 역할을 수행해야 하기 때문입니다.

프록시 설정의 필요성을 3가지 핵심 관점으로 정리해 드릴게요.

## 1. 통신 중간에서의 '가로채기' (Interception)

기본적으로 브라우저는 서버와 직접 대화합니다. 하지만 JMeter는 브라우저 내부에서 일어나는 일을 직접 볼 수 있는 권한이 없습니다.

- **프록시가 없다면**: 브라우저 → 서버 (JMeter는 아무것도 모름)
- **프록시가 있다면**: 브라우저 → JMeter(프록시) → 서버

브라우저의 네트워크 설정을 JMeter 프록시(기본 포트 8888)로 맞추면, 브라우저가 보내는 모든 HTTP 요청(URL, 파라미터, 헤더, 쿠키 등)이 일단 JMeter를 거쳐 가게 됩니다. 이때 JMeter는 이 데이터를 복사하여 **.jmx 스크립트(블록)**로 변환합니다.

## 2. 복잡한 요청의 '자동 캡처' (Automation)

현대 웹사이트(특히 쇼핑몰)는 한 번의 클릭에도 수많은 데이터가 오갑니다.

- **로그인 시**: 아이디/비번뿐만 아니라 세션 토큰, 보안 키, 복잡한 헤더 정보가 포함됩니다.
- **필요성**: 이걸 개발자가 하나하나 수동으로 HTTP Request 블록에 타이핑하는 건 불가능에 가깝습니다. 프록시를 설정하면 브라우저가 실제로 날리는 **"원본 그대로의 요청"**을 한 토씨도 틀리지 않고 기록할 수 있습니다.

## 3. 세션 및 쿠키의 흐름 파악

장바구니 담기 시나리오에서는 **'내가 누구인지(Session)'**를 서버에 계속 증명해야 합니다.

- **브라우저는** 서버로부터 받은 쿠키를 다음 요청에 자동으로 실어 보냅니다.
- **JMeter 프록시는** 이 쿠키가 언제 생성되고 어떻게 전달되는지를 실시간으로 관찰하여, 나중에 테스트를 실행할 때 HTTP Cookie Manager가 이를 재현할 수 있도록 기초 데이터를 수집합니다.

## 💡 실습 시 주의할 점 (트러블슈팅)

프록시 설정을 마쳤는데도 레코딩이 안 된다면 다음 두 가지를 체크하세요.

- **방화벽 및 포트 충돌**: 8888 포트를 다른 프로그램이 사용 중인지 확인하세요.
- **HTTPS 인증서 (중요)**:
  - HTTPS 사이트를 레코딩하려면 JMeter가 생성한 Root CA 인증서를 브라우저에 등록해야 합니다.
  - 등록하지 않으면 브라우저가 JMeter를 '중간자 공격을 시도하는 해커'로 오인하여 통신을 차단합니다.
- **Localhost 예외**:
  - 만약 테스트 대상 서버가 브라우저와 같은 PC(localhost)에 있다면, 브라우저 설정에서 "로컬 주소에 대해 프록시 서버 미사용" 체크를 해제해야 합니다.