# JMeter 레코딩 템플릿 구성 요소 이해

JMeter에서 Template > Recording을 선택하여 생성된 구성 요소들은 단순히 모여 있는 것이 아니라, 실제 웹 브라우저의 동작을 완벽하게 흉내 내기 위한 **'팀 체계'**를 갖추고 있습니다.

각 구성 요소가 어떤 역할을 수행하는지 핵심 기능을 중심으로 설명해 드립니다.

## 1. 전역 설정 요소 (Global Settings)

테스트 계획 최상단에 위치하며, 하위의 모든 HTTP 요청에 공통적으로 적용되는 규칙을 정의합니다.

**HTTP Request Defaults**: 
- **역할**: 서버의 IP(예: EC2 주소), 포트 번호(8080) 등을 한 번만 적어두면 모든 요청 블록에 자동 적용됩니다.
- **이유**: 서버 주소가 바뀌었을 때 수백 개의 블록을 일일이 수정하지 않기 위해서입니다.

**HTTP Cookie Manager**:
- **역할**: 브라우저의 쿠키 기능을 흉내 냅니다. 로그인 후 서버가 주는 '세션 ID'를 보관했다가 다음 요청에 자동으로 실어 보냅니다.
- **중요성**: 이게 없으면 로그인을 해도 다음 페이지로 넘어갈 때 다시 로그아웃된 상태가 됩니다.

**User Defined Variables**:
- **역할**: 테스트에서 공통으로 쓸 변수를 정의합니다. (예: hostname, port 등)

## 2. 부하 실행 요소 (Execution)

실제로 가상 사용자를 생성하고 시나리오를 실행하는 몸체입니다.

**Thread Group**:
- **역할**: 가상 사용자 수(Threads), 투입 속도(Ramp-up), 반복 횟수를 결정합니다.
- **레코딩 시**: 레코딩된 결과물(HTTP Request 블록들)이 이곳에 차곡차곡 쌓이게 됩니다.

## 3. 기록기 핵심 요소 (Non-Test Elements)

사용자의 움직임을 낚아채서 스크립트로 변환하는 '엔진'입니다.

**HTTP(S) Test Script Recorder**:
- **역할**: 프록시 서버 역할을 하며 브라우저와 서버 사이의 통신을 가로채 기록합니다.
- **핵심 옵션**:
  - **Port**: 8888 (브라우저와 맞추는 연결 통로)
  - **Target Controller**: 기록된 내용을 어디(Thread Group 등)에 저장할지 지정.
  - **Grouping**: 요청들을 어떻게 묶을지(그룹화 안 함, 새 트랜잭션 등) 결정.

## 4. 필터링 및 관리 요소 (Filtering)

불필요한 쓰레기 데이터를 걸러내어 시나오를 깨끗하게 만듭니다.

**Requests Filtering (Recorder 내부에 위치)**:
- **URL Patterns to Exclude**: 쇼핑몰 로직과 상관없는 이미지(.png, .gif), 광고 스크립트, 폰트 파일 등을 기록에서 제외합니다.
- **URL Patterns to Include**: 특정 도메인(내 EC2 주소)의 요청만 기록하도록 한정할 수 있습니다.

## 5. 분석 요소 (Listeners)

기록된 내용이 잘 작동하는지 확인하는 모니터링 창입니다.

**View Results Tree**: 
- **레코딩 후 테스트를 돌렸을 때**, 각 단계의 요청값과 서버의 응답값(HTML 결과 등)을 상세히 보여줍니다.
- **레코딩 검증용으로 가장 많이 쓰입니다**.

## 💡 레코딩 템플릿 사용 시 흐름 요약

1. Defaults에 EC2 주소를 적는다.
2. Recorder에서 Start를 눌러 프록시를 켠다.
3. 브라우저 활동이 Thread Group에 블록으로 쌓인다.
4. View Results Tree를 보며 에러 없이 잘 기록되었는지 확인한다.
5. Scouter를 켜고 실제 부하를 주어 서버의 상태를 감시한다.