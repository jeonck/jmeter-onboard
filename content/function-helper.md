# JMeter Function Helper 활용

JMeter의 Function Helper는 스크립트 작성 시 고정된 값이 아닌 **동적으로 변하는 데이터(난수, 현재 시간, 변수 연산 등)**를 생성하고 싶을 때 사용하는 '코드 생성기'입니다.

복잡한 문법을 외울 필요 없이 UI를 통해 함수를 만들고 복사해서 쓸 수 있게 도와줍니다.

## 1. Function Helper 사용 방법

JMeter 상단 메뉴의 **[Options] > [Function Helper Dialog]**를 선택하거나, 툴바에서 책 모양 아이콘을 클릭하면 대화상자가 열립니다.

- **Choose a function**: 사용하고 싶은 함수를 선택합니다.
- **Function Parameters**: 함수에 필요한 인자(값)를 입력합니다.
- **Generate**: 버튼을 누르면 ${...} 형태의 완성된 함수 코드가 생성됩니다.
- **Copy & Paste**: 생성된 코드를 복사하여 HTTP Request의 파라미터나 경로 등에 붙여넣습니다.

## 2. 실무에서 가장 많이 쓰는 핵심 함수 TOP 5

### ① ${__Random(1, 100,)} (난수 생성)

- **용도**: 상품 ID, 게시글 번호 등을 랜덤하게 호출할 때 사용합니다.
- **설정**: 최솟값, 최대값, (선택) 결과값을 저장할 변수명.

### ② ${__time(yyyy-MM-dd,)} (현재 시간)

- **용도**: 주문 시간, 조회 조건 등에 현재 날짜나 시간이 필요할 때 사용합니다.
- **설정**: yyyyMMdd-HHmmss 처럼 포맷을 자유롭게 지정할 수 있습니다.

### ③ ${__UUID()} (고유 식별자 생성)

- **용도**: 중복되면 안 되는 트랜잭션 ID나 파일명 등을 만들 때 사용합니다.
- **결과**: 550e8400-e29b-41d4-a716-446655440000 같은 고유한 값을 반환합니다.

### ④ ${__V(var_${index})} (중첩 변수 호출)

- **용도**: 변수 안에 변수가 들어있는 경우(예: 반복문에서 list_1, list_2 등을 호출할 때) 사용합니다.
- **중요**: 정규표현식 추출기(Regex Extractor)와 조합하여 동적 시나리오를 짤 때 필수입니다.

### ⑤ ${__setProperty(prop_name, ${value},)} (전역 변수 설정)

- **용도**: 한 Thread Group에서 얻은 값을 다른 Thread Group으로 전달할 때 사용합니다.
- **팁**: 부하 테스트 시 로그인 그룹과 업무 그룹이 나뉘어 있을 때 유용합니다.

## 3. Function Helper 활용 예시 (t3.medium 환경)

부하 테스트 시 캐시(Cache)를 우회하기 위해 사용하면 매우 효과적입니다.

- **문제**: 매번 똑같은 URL(예: /api/product/10)을 호출하면 서버나 CDN이 캐싱된 결과를 주어 실제 성능 측정이 어려울 수 있습니다.
- **해결**: URL 뒤에 난수 파라미터를 붙입니다.
  ```
  GET /api/product/10?dummy=${__Random(1000,9999,)}
  ```
  이렇게 하면 서버는 매번 새로운 요청으로 인식하여 실제 로직을 태우게 됩니다.

## 4. 주의사항: 성능 영향

- **과도한 사용 지양**: 함수는 요청이 발생할 때마다 실시간으로 연산됩니다. 수천 명의 가상 사용자(VU)가 매 밀리초마다 복잡한 함수를 호출하면 부하 발생기(JMeter)의 CPU 점유율이 올라가 성능 왜곡이 생길 수 있습니다.
- **정적 데이터는 CSV로**: 값이 수만 개 필요하다면 함수보다는 CSV Data Set Config를 사용하여 미리 준비된 데이터를 읽어오는 것이 부하 발생기 자원 관리 측면에서 유리합니다.

## 💡 유용한 팁

함수가 제대로 작동하는지 확인하고 싶다면 **[Debug Sampler]**를 추가해 보세요. 테스트 실행 후 View Results Tree에서 함수가 실제 어떤 값으로 치환되어 전송되었는지 한눈에 확인할 수 있습니다.