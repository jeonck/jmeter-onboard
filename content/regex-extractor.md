# JMeter Regular Expression Extractor 활용

Regular Expression Extractor는 응답 본문(Body), 헤더(Header), URL 등에서 특정 패턴을 찾아내어 변수로 저장하는 **Post-Processor(후처리기)**입니다.

단순히 텍스트를 찾는 수준을 넘어, 복잡한 문자열 뭉치에서 내가 원하는 '보석(데이터)'만 정교하게 골라내는 기능을 수행합니다. 주요 설정값의 구체적인 의미와 작동 원리를 정리해 드립니다.

## 1. 주요 설정 항목의 상세 의미

이 필드들을 정확히 이해해야 데이터가 유실되거나 엉뚱한 값이 담기는 것을 방지할 수 있습니다.

| 항목 (Field) | 상세 설명 |
|--------------|------------|
| Apply to | 어디서 찾을지 정합니다. 보통 Main sample only(현재 페이지)를 쓰지만, 리다이렉트된 URL이나 하위 리소스까지 뒤질 수도 있습니다. |
| Field to check | 응답의 어느 부분을 뒤질지 선택합니다. (Body, Headers, URL, Response Code 등) |
| Reference Name | 추출한 값을 저장할 변수 이름입니다. 이후 ${변수명}으로 호출합니다. |
| Regular Expression | 패턴 매칭 공식입니다. (예: id="(.+?)") |
| Template | 추출된 그룹 중 몇 번째를 쓸지 정합니다. $1$는 첫 번째 괄호 그룹을 의미합니다. |
| Match No. | 일치하는 값이 여러 개일 때: 1은 첫 번째, 0은 랜덤, -1은 모든 값을 리스트로 추출합니다. |
| Default Value | 패턴을 찾지 못했을 때 들어갈 기본값입니다. (보통 NOT_FOUND 등을 적어 에러를 확인합니다.) |

## 2. 괄호 ()와 템플릿 $1$의 관계

정규식 하나로 여러 데이터를 동시에 뽑아낼 때 유용합니다.

**정규식**: productID="(.+?)" name="(.+?)"

괄호가 두 개이므로:
- **$1$**을 쓰면 productID 값만 변수에 담깁니다.
- **$2$**를 쓰면 name 값만 변수에 담깁니다.
- **$1$$2$**라고 쓰면 두 값이 붙어서 저장됩니다.

## 3. Match No.의 전략적 활용

- **Match No. = 1 (고정)**: 항상 가장 위에 노출되는 '공지사항'이나 '최신글'을 가져올 때 씁니다.
- **Match No. = 0 (랜덤)**: 부하 테스트 시 가상 사용자들이 각기 다른 상품 페이지로 흩어지게 하여 DB 부하를 분산시킬 때 사용합니다.
- **Match No. = -1 (전체)**: 해당 페이지의 모든 상품 ID를 가져온 뒤, 나중에 ForEach Controller와 조합하여 모든 상품을 한 번씩 클릭하게 만들 때 씁니다. (이때 변수는 var_1, var_2 형태로 자동 생성됩니다.)

## 4. 실전 디버깅 팁

정규식을 짰는데 값이 제대로 안 들어온다면 두 가지만 확인하세요.

- **RegExp Tester 활용**: View Results Tree 리스너에서 왼쪽 하단 드롭다운을 RegExp Tester로 바꾼 뒤, 본문에 정규식을 입력하고 Test 버튼을 누르면 미리 결과를 볼 수 있습니다. (실행 전 검증 가능)
- **Debug Sampler 확인**: 테스트 실행 후 Debug Sampler의 응답 데이터에서 내가 설정한 Reference Name이 실제 값과 매칭되었는지 확인합니다.

## 5. 성능 관점에서의 주의점 (t3.medium 환경)

정규식은 텍스트를 한 줄 한 줄 검사하므로 CPU 자원을 소모합니다.

- **최소 일치(?) 사용**: (.+) 대신 (.+?)를 사용하여 필요한 부분까지만 검사하고 멈추게 하세요. 불필요한 연산을 줄여줍니다.
- **범위 좁히기**: Body 전체를 뒤지는 것보다, 값이 들어있을 것이 확실한 Headers나 URL로 범위를 좁히면 더 빠르고 정확하게 추출할 수 있습니다.