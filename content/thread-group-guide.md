# JMeter Thread Group 설정 가이드

JMeter를 사용해 부하를 주면서 Scouter로 그 영향을 실시간 모니터링하는 과정은 아주 흥미롭습니다. 설정하신 값들을 바탕으로 "서버가 버틸 수 있는 한계치까지 밀어붙이는" 실습 가이드를 구성해 드릴게요.

## 1. Thread Group 설정의 의미

입력하신 설정은 서버에 지속적이고 일정한 압박을 가하는 방식입니다.

- **Number of Threads (Users)**: 동시에 접속하는 가상 사용자 수입니다. (예: 100)
- **Ramp-up Period (seconds)**: 설정한 인원이 다 접속할 때까지 걸리는 시간입니다.
  - Tip: 100명을 10초로 설정하면, 1초마다 10명씩 투입됩니다.
- **Loop Count (Infinite)**: 체크 시 멈추지 않고 계속 요청을 보냅니다. (중지 버튼을 누를 때까지)
- **Constant Timer (Thread Delay)**: 사용자 한 명이 요청을 보낸 후 다음 요청을 보내기 전까지 쉬는 시간(ms)입니다.

주의: 이 값이 너무 작거나 없으면 서버가 순식간에 뻗을 수 있습니다. 보통 300~500ms 정도로 시작해 보세요.

## 2. 실습 시나리오: "쇼핑몰 서버의 병목 지점 찾기"

### Step 1: JMeter 부하 시작
- HTTP Request에 EC2 퍼블릭 IP와 포트(8080), 그리고 상품 목록 조회 경로(예: /api/products)를 입력합니다.
- 상단 'Start' (초록색 화살표) 버튼을 누릅니다.

### Step 2: Scouter XLog 분석 (핵심)
이제 웹 브라우저 대신 Scouter Client 화면을 봅니다.

- **XLog 차트**: 요청이 들어올 때마다 점이 찍힙니다.
  - 아래쪽에 깔리는 점: 정상적인 빠른 응답.
  - 위로 치솟는 점: 처리가 늦어지는 요청 (위험 신호!).
- **드래그 분석**: 위로 튀어 오른 점들을 마우스로 드래그해 보세요. 해당 요청이 어떤 SQL을 실행했는지, Java 메서드 중 어디서 시간을 끌었는지 상세 팝업이 뜹니다.

### Step 3: 성능 한계점(Saturation Point) 찾기
- JMeter의 Number of Threads를 10 → 50 → 100으로 단계적으로 높여봅니다.
- Scouter의 CPU/Memory/TPS 그래프를 관찰합니다.
- **TPS(초당 처리량)**가 더 이상 오르지 않고 정체되거나,
- 응답 시간이 급격히 길어지면 그 지점이 현재 서버의 한계입니다.

## 3. 추천하는 추가 설정 (결과 확인용)

JMeter 왼쪽 트리에서 Http Request 우클릭 -> Add -> Listener를 통해 아래 두 가지를 추가해 보세요. 시각적으로 훨씬 이해하기 좋습니다.

- **View Results Tree**: 각 요청이 성공(초록)했는지 실패(빨강)했는지, 데이터는 잘 왔는지 개별 확인 가능.
- **Summary Report**: 평균 응답 시간, 최소/최대 시간, **Error %**를 표로 한눈에 정리.

## 💡 실습 꿀팁 (돌발 상황 대비)

- **Infinite(무한 반복) 주의**: EC2 인스턴스 사양이 낮을 경우(t2.micro 등), 무한 반복으로 돌리면 서버가 완전히 멈춰서 SSH 접속조차 안 될 수 있습니다. 처음엔 Loop Count를 100 정도로 제한하고 테스트해 보시는 걸 권장해요.
- **Constant Timer의 위치**: 반드시 HTTP Request 안에 넣거나 같은 레벨에 두어야 해당 요청에 적용됩니다.